!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).app=t()}(this,function(){"use strict";function i(t){let n,r=!1;return function(...e){if(!r)return r=!0,t(...e);n&&window.cancelAnimationFrame(n),n=window.requestAnimationFrame(function(){t(...e)})}}function d(e,t,n=document){e=new CustomEvent("app:"+e,{bubbles:!0,cancelable:!0,detail:t});return n.dispatchEvent(e)}function l(e){return"string"==typeof e?document.querySelector(e):e}function c(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}let u;function s(e){(u=e)(),u=void 0}let y=["input","option","textarea"],b=["value","checked","selected"],v=["checked","selected"];function N(e){return["false","null","undefined","0","-0","NaN","0n","-0n"].includes(e)}function a(e,t,n){t=t.replace(/\s+/g,"").toLowerCase();return["src","href","xlink:href"].includes(e)&&(t.includes("javascript:")||t.includes("data:text/html"))||!(!e.startsWith("@on")&&!e.startsWith("#on")&&(n||!e.startsWith("on")))}function x(e,t,n,r){a(t,n,r)||(r&&r.delegate?r.delegate(e,t,n):(b.includes(t)&&(e[t]="value"===t?n:" "),e.setAttribute(t,n)))}function w(e,t){b.includes(t)&&(e[t]=""),e.removeAttribute(t)}function T(e,t){if(1===e.nodeType){for(var{name:n,value:r}of e.attributes){var o;a(n,r,t)?w(e,n):t&&t.delegate?(t.delegate(e,n,r),w(e,n)):(n.startsWith("@")||n.startsWith("#"))&&(o=n.slice(1),w(e,n),v.includes(o)&&N(r)||x(e,o,r,t))}if(e.childNodes)for(var i of e.childNodes)T(i,t)}}function C(e){return e.childNodes&&e.childNodes.length?null:e.textContent}function E(e,t){return"number"==typeof e.nodeType&&e.nodeType!==t.nodeType||"string"==typeof e.tagName&&e.tagName!==t.tagName||"string"==typeof e.id&&e.id!==t.id||"string"==typeof e.src&&e.src!==t.src}function A(t,p,m){var e,n=t.childNodes;let g=p.childNodes;for(e of t.querySelectorAll("script"))e.remove();n.forEach(function(e,t){if(g[t]){if(E(e,g[t])){n=e,r=g,i=t;r=Array.from(r).slice(i+1).find(function(e){return!E(n,e)});if(!r)return T(i=e.cloneNode(!0),m),void g[t].before(i);g[t].before(r)}var n,r,o,i=e,l=g[t],d=m;if(1===i.nodeType){var c,u,s,a,f,h=i.attributes,i=l.attributes;for({name:c,value:u}of h)c.startsWith("#")||(s=c,v.includes(s)&&N(u)?w(l,s):x(l,s,u,d));for({name:a,value:f}of i)h[a]||a.startsWith("reef-on")&&h[a.replace("reef-","")]||b.includes(a)&&y.includes(l.tagName.toLowerCase())||w(l,a)}e.nodeName.includes("-")||((r=C(e))&&r!==C(g[t])&&(g[t].textContent=r),!e.childNodes.length&&g[t].childNodes.length?g[t].innerHTML="":!g[t].childNodes.length&&e.childNodes.length?(A(e,o=document.createDocumentFragment(),m),g[t].appendChild(o)):e.childNodes.length&&A(e,g[t],m))}else T(o=e.cloneNode(!0),m),p.append(o)});{var r=g;t=n;let e=r.length-t.length;if(!(e<1))for(;0<e;e--)r[r.length-1].remove()}}function f(e,t,{events:n}={}){e=l(e),t=function(e){let t=(new DOMParser).parseFromString(e,"text/html");return t.head&&t.head.childNodes.length&&Array.from(t.head.childNodes).reverse().forEach(function(e){t.body.insertBefore(e,t.body.firstChild)}),t.body||document.createElement("body")}(t);if(d("before-render",null,e))return A(t,e,n),d("render",null,e),e}return{utils:Object.freeze({__proto__:null,bindTemplate:function(e,t,n={}){let r=l(e),o=i(f);return s(()=>{o(r,t(),n)}),r},createEffect:s,createSignal:function(e={},t=""){return e=["array","object"].includes(c(e))?e:{value:e},new Proxy(e,function n(r,o){let i="store"+(r?"-"+r:"");const l=[];return{get(e,t){return u&&!l.includes(u)&&l.push(u),"_isProxy"===t||(["object","array"].includes(c(e[t]))&&!e[t]._isProxy&&(e[t]=new Proxy(e[t],n(r,o))),e[t])},set(e,t,n){return e[t]!==n&&(e[t]=n,d(i,o),l.forEach(e=>e())),!0},deleteProperty(e,t){return delete e[t],d(i,o),!0}}}(t,e))},debounceRender:i,getElem:l,render:f})}});
